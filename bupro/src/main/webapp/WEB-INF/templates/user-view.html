<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring3-3.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:include="header :: head">
	<title th:text="#{user(${user.firstName}, ${user.lastName})}" >User</title>
</head>
<body>
	<div th:include="header :: menu"></div>
	<h1 th:text="#{format.fullname(${user.firstName}, ${user.lastName})}">User name</h1>
	<div>
		<h2 th:text="#{user.projects}" >Projects</h2>
		<h3 th:text="#{user.projects.teaching}" >Leading</h3>
		<table th:unless="${#lists.isEmpty(teached)}" class="list" th:include="projectTag :: projectList" th:with="projects=${teached}" ></table>
		<h3 th:text="#{user.projects.student}" >Participating</h3>
		<table th:unless="${#lists.isEmpty(membershiped)}" class="list" th:include="projectTag :: projectList" th:with="projects=${membershiped}" ></table>
	</div>
	<div>
		<h2 th:text="#{comments}" >Comments</h2>
		<div id="comments">
			<div class="comment" th:each="comment : ${user.comments}">
				<div>
					<span class="author" th:text="#{format.fullname(${comment.user.firstName},${comment.user.lastName})}">Comment-Author</span>
					<span class="time" th:text="${#dates.format(comment.creationTime,'yyyy-MM-dd HH:mm')}">Creation Time</span>
					<span class="title" th:text="${comment.title}">Comment-Title</span>
				</div>
				<div class="text" th:text="${comment.text}">Comment-Text</div>
			</div>
		</div>
		<div>
			<form action="#">
				<table>
					<tbody>
						<tr>
							<td><label for="comment-title" th:text="#{comment.title}" >title:</label></td>
							<td><input id="comment-title" type="text" /></td>
						</tr>
						<tr>
							<td><label for="comment-text" th:text="#{comment.text}">comment:</label></td>
							<td><textarea id="comment-text"></textarea></td>
						</tr>
					</tbody>
				</table>
				<script type="text/javascript" th:inline="javascript">
				/*<![CDATA[*/
					function submitComment() {
						var id = /*[[${user.id}]]*/ 0;
						var title = $("#comment-title")[0].value;
						var text = $("#comment-text")[0].value;
						client.comment('user', id , title, text);
					}
				/*]]>*/
				</script>
				<input type="button" value="Comment" th:value="#{comment}" onclick="submitComment();" />
			</form>
		</div>
	</div>
</body>
</html>